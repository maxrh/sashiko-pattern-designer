---
import Layout from '../layouts/Layout.astro';
import PatternDesigner from '../components/PatternDesigner.jsx';
import ErrorBoundary from '../components/ErrorBoundary.jsx';
---

<Layout title="Sashiko Pattern Designer">
	<ErrorBoundary client:only="react">
		<PatternDesigner client:only="react" />
	</ErrorBoundary>
	
	<!-- Service Worker Registration -->
	<script is:inline>
		if ('serviceWorker' in navigator) {
			window.addEventListener('load', () => {
				navigator.serviceWorker.register('/sw.js', { scope: '/' })
					.then(registration => {
						console.log('SW registered:', registration);
					})
					.catch(error => {
						console.log('SW registration failed:', error);
					});
			});
		}
	</script>
</Layout>
